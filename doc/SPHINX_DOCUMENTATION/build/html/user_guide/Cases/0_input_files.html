
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Input files &#8212; DassFlow-2D 1.0 documentation</title>
  <script>
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=1e1de1a1873e13ef5536" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=1e1de1a1873e13ef5536" rel="stylesheet">

  
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/dassflow.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=1e1de1a1873e13ef5536">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'user_guide/Cases/0_input_files';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary">
  <label class="overlay overlay-primary" for="__primary"></label>

  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary">
  <label class="overlay overlay-secondary" for="__secondary"></label>

  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
      
<form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
  </div>

  
  <nav class="bd-header navbar navbar-expand-lg bd-navbar" id="navbar-main"><div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
      <span class="fa-solid fa-bars"></span>
  </label>
  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../../index.html">

  
  
  
  
  
  
  

  
  
    <p class="title logo__title">DassFlow-2D 1.0 documentation</p>
  
</a>
    
  </div>

  
  <div class="col-lg-9 navbar-header-items">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                <li class="nav-item">
                    <a class="nav-link" href="../../Introduction/index.html">
                        Presentation
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../../getting_started/index.html">
                        Getting started
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../index.html">
                        User Guide
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../../reference/index.html">
                        API Reference
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../../numerical_guide/index.html">
                        Numerical Guide
                    </a>
                </li>
                
            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">
                    
                <li class="nav-item">
                    <a class="nav-link" href="../../license/index.html">
                        License
                    </a>
                </li>
                
                </div>
            </div>
            
    </ul>
</nav>
      </div>
      
    </div>

    <div id="navbar-end">
      <div class="navbar-end-item navbar-end__search-button-container">
        
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
      </div>
      
      <div class="navbar-end-item">
        <span class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" data-toggle="tooltip">
    <a class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="fa-regular fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>


  
  <div class="search-button-container--mobile">
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
  </div>

  
  <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
  </label>
  

</div>
  </nav>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar hide-on-wide">
        
  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                <li class="nav-item">
                    <a class="nav-link" href="../../Introduction/index.html">
                        Presentation
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../../getting_started/index.html">
                        Getting started
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../index.html">
                        User Guide
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../../reference/index.html">
                        API Reference
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../../numerical_guide/index.html">
                        Numerical Guide
                    </a>
                </li>
                
            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">
                    
                <li class="nav-item">
                    <a class="nav-link" href="../../license/index.html">
                        License
                    </a>
                </li>
                
                </div>
            </div>
            
    </ul>
</nav>
      </div>
      
      </div>
    

    
    
    <div class="sidebar-header-items__end">
      
      <div class="navbar-end-item">
        <span class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" data-toggle="tooltip">
    <a class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="fa-regular fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
    
  </div>

  

  
  <div class="sidebar-end-items sidebar-primary__section">
    <div class="sidebar-end-items__item">
    </div>
  </div>

      </div>
      <main class="bd-main">
        
        
        <div class="bd-content">
          <div class="bd-article-container">
            
            <div class="bd-header-article">
                
            </div>
            
            
            <article class="bd-article" role="main">
              
  <div class="section" id="input-files">
<span id="id1"></span><h1>Input files<a class="headerlink" href="#input-files" title="Permalink to this heading">#</a></h1>
<p>To perform simulations using dassflow, some input files are required.
We list the necessary files below.</p>
<table class="table">
<colgroup>
<col style="width: 22%" />
<col style="width: 10%" />
<col style="width: 34%" />
<col style="width: 34%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>File</p></th>
<th class="head" colspan="2"><p>Description</p></th>
<th class="head"><p>is necessary ?</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>input.txt</p></td>
<td colspan="2"><p>Defines all variables concerning the numerical
and physical parameters  and input/output options.</p></td>
<td><p>yes</p></td>
</tr>
<tr class="row-odd"><td><p>mesh.geo</p></td>
<td colspan="2"><p>Defines node coordinate and cells correspondance to
nodes. As well as boundaries type.
Some model parameters are also defined in mesh file
(such as land type for friction, bathymetry)</p></td>
<td><p>yes</p></td>
</tr>
<tr class="row-even"><td><p>land_uses.txt</p></td>
<td colspan="2"><p>defines correspondance between mesh’s land type
and actual value</p></td>
<td><p>yes</p></td>
</tr>
<tr class="row-odd"><td><p>bc.txt</p></td>
<td colspan="2"><p>Defines correspondance between mesh.geo file
(bc type) and   the following .txt files
(values applied to the bc)</p></td>
<td><p>yes</p></td>
</tr>
<tr class="row-even"><td><p>hydrograph.txt</p>
<p>ratcurve.txt</p>
<p>hpresc.txt</p>
<p>zpresc.txt</p>
</td>
<td colspan="2"><p>contains tables of values to apply on the boundary</p></td>
<td><p>necessary for boundaries
type specified in bc. txt</p></td>
</tr>
<tr class="row-odd"><td><p>obs.txt</p></td>
<td colspan="2"><p>Defines parameter for observed data for data
assimilation. (localisation of observed data and
timestep availability</p></td>
<td><p>necessary for minimization run</p></td>
</tr>
<tr class="row-even"><td><p>rain.txt</p></td>
<td colspan="2"><p>to be documented</p></td>
<td><p>no</p></td>
</tr>
<tr class="row-odd"><td><p>infil.txt</p></td>
<td colspan="2"><p>to be documented</p></td>
<td><p>no</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Most files can be generated in basic case using the script run.py after neccessary installs in
<em class="xref py py-obj">/dassflow2d-wrap/Tools/2_gen_basic_channel</em></p>
<p>Most data provided within input files can be modified a posteriori within python script
nonetheless, only the values of variables can be modified. (Meaning that the structure and size
of the object is fixed and can’t be modified once the input files are read)</p>
</div>
</div>
<div class="section" id="generate-input-files">
<h1>Generate input files<a class="headerlink" href="#generate-input-files" title="Permalink to this heading">#</a></h1>
<blockquote>
<div><p>Go to the directory <em class="xref py py-obj">/dassflow2d-wrap/Tools/2_gen_basic_channel</em> and open the note <em class="xref py py-obj">readme.txt</em>.</p>
<p>run the following command in your terminal (still in directory <em class="xref py py-obj">/dassflow2d-wrap/Tools/2_gen_basic_channel</em>).</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3 -m numpy.f2py -c -m gen_channel_case _gen_channel_case.f90
</pre></div>
</div>
<p>This generates a wrapped package called <em>gen_channel_case</em> of subroutines written in <em>_gen_channel_case.f90</em>. Then, perform the command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3 run.py
</pre></div>
</div>
<p>you can see that in run.py, we execute the routine defined in <code class="docutils literal notranslate"><span class="pre">gen_dassflow.py</span></code>.
It is in the file <code class="docutils literal notranslate"><span class="pre">gen_dassflow.py</span></code> that you can modify the parameters of file generation.
The fortran subroutines  are documented within fortran script and
gen_dassflow methods are documented within <code class="docutils literal notranslate"><span class="pre">gen_dassflow.py</span></code> script. (<strong>to be done</strong>)</p>
</div></blockquote>
</div>
<div class="section" id="explore-generated-input-files">
<h1>Explore generated input files<a class="headerlink" href="#explore-generated-input-files" title="Permalink to this heading">#</a></h1>
<p>You can see that multiple files have been generated in <em>files/</em> directory :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ls files
</pre></div>
</div>
<p>You can open each files to have a look at what they look like:</p>
<ul class="simple">
<li><p>mesh data:</p>
<ul>
<li><p>channel.geo</p></li>
</ul>
</li>
<li><p>Boundaries data:</p>
<ul>
<li><p>bc.txt</p></li>
<li><p>hpresc.txt</p></li>
<li><p>hydrograph.txt</p></li>
</ul>
</li>
<li><p>spatial variable parameter data:</p>
<ul>
<li><p>land_uses.txt</p></li>
</ul>
</li>
<li><p>inference data (not necessary to perform direct simulations)</p>
<ul>
<li><p>obs.txt</p></li>
</ul>
</li>
<li><p>model parameter data:</p>
<ul>
<li><p>input.txt (to be done)</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="detailed-presentation-of-each-input-files">
<h1>Detailed presentation of each input files<a class="headerlink" href="#detailed-presentation-of-each-input-files" title="Permalink to this heading">#</a></h1>
<ul class="simple">
<li><p><span class="xref std std-ref">Mesh input file</span></p></li>
<li><p><span class="xref std std-ref">Boundary input files</span></p></li>
</ul>
<p>The minimal requirements are the files <code class="docutils literal notranslate"><span class="pre">input.txt</span></code> which accounts for
<strong>model and simulation parameters</strong>. In the input.txt file you also specify the path to
the <code class="docutils literal notranslate"><span class="pre">mesh.geo</span></code> that define the name of the mesh file.</p>
<p>Additionaly, necessary files to define <strong>boundary conditions</strong> have to be provided.
The file <code class="docutils literal notranslate"><span class="pre">bc.txt</span></code> defines the boundaries type as well as their correspondance with
the <code class="docutils literal notranslate"><span class="pre">meshing</span></code>. Depending of the type of boundry defined, you have to provide the
boundary file corresponding (such as <code class="docutils literal notranslate"><span class="pre">hydrograph.txt</span></code>, <code class="docutils literal notranslate"><span class="pre">ratcurve.txt</span></code>, <code class="docutils literal notranslate"><span class="pre">hpresc.txt</span></code>,  <code class="docutils literal notranslate"><span class="pre">zpresc.txt</span></code> )
which correspond to tables with two entry (time and h/z/q for most files or Q/h correspondance for rating curve).</p>
<p>Furthermore, some parameter files can be provided, shuch as <code class="docutils literal notranslate"><span class="pre">land_uses.txt</span></code>.</p>
<p>Finaly, initial conditions can be specified in ic.bin file. <strong>to be documented by a sachant</strong>.</p>
</div>


            </article>
            
            
            
            <footer class="bd-footer-article">
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
            </footer>
            
          </div>
          
          
          
            <div class="bd-sidebar-secondary bd-toc">
              
<div class="toc-item">
  
<div class="tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
</div>
<nav id="bd-toc-nav" class="page-toc">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Input files
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#generate-input-files">
   Generate input files
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#explore-generated-input-files">
   Explore generated input files
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#detailed-presentation-of-each-input-files">
   Detailed presentation of each input files
  </a>
 </li>
</ul>

</nav>
</div>

<div class="toc-item">
  
<div id="searchbox"></div>
</div>

<div class="toc-item">
  

<div class="tocsection editthispage">
    <a href="https://gitlab.irstea.fr//lilian.villenave/dassflow2d-wrap/-/edit/documentation//doc/SPHINX_DOCUMENTATION/source/user_guide/Cases/0_input_files.rst">
        <i class="fa-solid fa-pencil"></i> Edit this page
    </a>
</div>

</div>

<div class="toc-item">
  
<div class="tocsection sourcelink">
    <a href="../../_sources/user_guide/Cases/0_input_files.rst.txt">
        <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
</div>

</div>

            </div>
          
          
        </div>
        <footer class="bd-footer-content">
          <div class="bd-footer-content__inner">
            
          </div>
        </footer>
        
      </main>
    </div>
  </div>

  
    
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/pydata-sphinx-theme.js?digest=1e1de1a1873e13ef5536"></script>

  <footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    
<p class="copyright">

    &copy; Copyright Under Cecil licence.<br>

</p>

  </div>
  
  <div class="footer-item">
    
<p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.0.0+.<br>
</p>

  </div>
  
</div>
  </footer>
  </body>
</html>